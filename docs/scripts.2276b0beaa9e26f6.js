window.addEventListener("hashchange",function(){valiadtions()}),document.addEventListener("DOMContentLoaded",()=>{var n=window.sessionStorage.getItem("navIn"),a=window.sessionStorage.getItem("navOut");(null==n||null==a)&&(n=document.getElementById("nav-login").outerHTML,a=document.getElementById("nav-logout").outerHTML,window.sessionStorage.setItem("navIn",n),window.sessionStorage.setItem("navOut",a)),null==window.sessionStorage.getItem("log")&&window.sessionStorage.setItem("log","false"),valiadtions()}),auth.onAuthStateChanged(function(n){n?window.sessionStorage.setItem("log","true"):window.sessionStorage.setItem("log","false"),valiadtions()});{let n=function(){var e=window.sessionStorage.getItem("log");a(e),s(e),o()},a=function(e){var t=document.getElementById("head-nav");if(null!=t){if(t.innerHTML="","true"==e)var r=window.sessionStorage.getItem("navIn");else r=window.sessionStorage.getItem("navOut");t.insertAdjacentHTML("afterbegin",r),i()}},i=function(){const e=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);e.length>0&&e.forEach(t=>{t.addEventListener("click",()=>{const l=document.getElementById(t.dataset.target);t.classList.toggle("is-active"),l.classList.toggle("is-active")})})},s=function(e){("true"==e&&["#/login","#/register"].includes(location.hash)||"false"==e&&["#/profile","#/test"].includes(location.hash))&&(location.hash="#/")},o=function(){var e=auth.currentUser;"#/profile"==location.hash&&null!=e&&(console.log(e.uid),db.collection("users").doc(e.uid).get().then(t=>{var r=t.data().Name;document.getElementById("uName").innerHTML="hello "+r+" \u270c"}))};var valiadtions=n,headerValidate=a,fixBurgers=i,locationValidate=s,loadProfile=o}var register=function(){var s=document.getElementById("register_nickname_input").value,o=document.getElementById("register_email_input").value,e=document.getElementById("register_password_input").value;[inputStyle("register","nickname"),inputStyle("register","email"),inputStyle("register","password"),inputStyle("register","confirm_password")].every(t=>t)?firebase.auth().createUserWithEmailAndPassword(o,e).then(t=>{db.collection("users").doc(t.user.uid).set({Name:s})}).catch(t=>{window.alert("Error ["+t.code+"]: "+t.message)}):window.alert("complete all fields!")},login=function(){var s=document.getElementById("login_email_input").value,o=document.getElementById("login_password_input").value;firebase.auth().signInWithEmailAndPassword(s,o).then(e=>{}).catch(e=>{window.alert("Error ["+e.code+"]: "+e.message)})},logout=function(){firebase.auth().signOut().catch(s=>{window.alert("Error : "+s.message)})},glucoseDontKnow=function(){document.getElementById("avg_glucose_level_input").disabled=!document.getElementById("avg_glucose_level_input").disabled,document.getElementById("avg_glucose_level_units").disabled=!document.getElementById("avg_glucose_level_units").disabled},placeholderRange=function(i,s,o){el=document.getElementById(i+"_units"),document.getElementById(i+"_input").setAttribute("placeholder",String(parseFloat((el.value*s).toFixed(2)))+"-"+String(parseFloat((el.value*o).toFixed(2))))};function inputStyle(n,a){var i=document.getElementById(n+"_"+a+"_input").value,s=document.getElementById(n+"_"+a+"_input"),o=document.getElementById(n+"_"+a+"_icon"),e=document.getElementById(n+"_"+a+"_help"),t={email:{message:"must be a valid email",pattern:/\S+@\S+\.\S+/},password:{message:"must be at least 8 characters long",pattern:/.{8,}/},nickname:{message:"must be a non-spaced phrase",pattern:/^\S+/},confirm_password:{message:"must match the password above",pattern:new RegExp(document.getElementById(n+"_password_input").value)}};return i.match(t[a].pattern)==i?(s.classList.add("is-success"),s.classList.remove("is-danger"),o.classList.add("fa-check"),o.classList.remove("fa-exclamation-triangle"),e.innerHTML="",!0):(s.classList.remove("is-success"),s.classList.add("is-danger"),o.classList.remove("fa-check"),o.classList.add("fa-exclamation-triangle"),e.innerHTML=t[a].message,!1)}function sendTest(){window.alert("this button is under development")}function temp(){var n=location.hash,a=window.sessionStorage.getItem("log");console.log(n),console.log(a)}